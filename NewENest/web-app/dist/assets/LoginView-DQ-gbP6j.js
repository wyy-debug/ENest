import{d as e,r as a,N as l,a as s,b as r,e as o,w as t,Q as i,f as u,h as d,o as m,u as n,i as p,E as c}from"./index-DxIqJ1ay.js";import{u as f}from"./userStore--b81hqFJ.js";import{_ as g}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-rSMZb3Ae.js";const b={class:"login-container"},_={class:"remember-forgot"},v={class:"register-link"},w=g(e({__name:"LoginView",setup(e){const g=n(),w=p(),y=f(),V=a(),h=a(!1),x=l({email:"",password:"",remember:!1}),k={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6个字符",trigger:"blur"}]},j=async()=>{V.value&&await V.value.validate((async e=>{if(!e)return;h.value=!0;const a=await y.login(x.email,x.password);if(h.value=!1,a.success){c.success("登录成功");const e=w.query.redirect||"/";g.push(e)}else c.error(a.message)}))};return(e,a)=>{const l=u("el-input"),n=u("el-form-item"),p=u("el-checkbox"),c=u("el-link"),f=u("el-button"),g=u("el-form"),w=u("router-link");return m(),s("div",b,[a[8]||(a[8]=r("h2",{class:"title"},"登录",-1)),o(g,{ref_key:"formRef",ref:V,model:x,rules:k,"label-position":"top",size:"large",onSubmit:i(j,["prevent"])},{default:t((()=>[o(n,{label:"邮箱",prop:"email"},{default:t((()=>[o(l,{modelValue:x.email,"onUpdate:modelValue":a[0]||(a[0]=e=>x.email=e),placeholder:"请输入邮箱","prefix-icon":"Message"},null,8,["modelValue"])])),_:1}),o(n,{label:"密码",prop:"password"},{default:t((()=>[o(l,{modelValue:x.password,"onUpdate:modelValue":a[1]||(a[1]=e=>x.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])])),_:1}),r("div",_,[o(p,{modelValue:x.remember,"onUpdate:modelValue":a[2]||(a[2]=e=>x.remember=e)},{default:t((()=>a[3]||(a[3]=[d("记住我")]))),_:1},8,["modelValue"]),o(c,{type:"primary",underline:!1},{default:t((()=>a[4]||(a[4]=[d("忘记密码？")]))),_:1})]),o(n,null,{default:t((()=>[o(f,{type:"primary","native-type":"submit",loading:h.value,class:"submit-btn"},{default:t((()=>a[5]||(a[5]=[d(" 登录 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]),r("div",v,[a[7]||(a[7]=d(" 还没有账号？ ")),o(w,{to:"/register"},{default:t((()=>a[6]||(a[6]=[d("立即注册")]))),_:1})])])}}}),[["__scopeId","data-v-54443c4e"]]);export{w as default};
