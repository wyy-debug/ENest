import{d as a,r as s,c as e,j as l,E as t,a as i,b as r,e as d,t as o,w as m,f as n,o as c,u,A as v,B as p,h as y,n as f,p as h,F as _,q as b,C as g,k,x}from"./index-DxIqJ1ay.js";import{u as w}from"./studyRoomStore-DErwerc7.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-rSMZb3Ae.js";const C={class:"home-container"},M={class:"welcome-section"},T={class:"stats-card"},$={class:"stat-item"},R={class:"stat-value"},z={class:"stat-item"},A={class:"stat-value"},E={class:"stat-item"},I={class:"stat-value"},N={class:"section-heading"},S={class:"room-info"},q={class:"room-description"},B={class:"room-meta"},F={class:"room-member-count"},H={class:"side-section"},P={class:"my-rooms"},V={class:"room-name"},D={class:"side-section"},G={class:"leaderboard"},J={class:"rank"},K={class:"user-info"},L={class:"username"},O={class:"study-time"},Q=j(a({__name:"HomeView",setup(a){const j=u(),Q=w(),U=s(!1),W=s(256),X=s(32),Y=s(1209600),Z=s([{id:1,username:"学霸一号",avatar:"",studyTime:18e3},{id:2,username:"勤奋学子",avatar:"",studyTime:15600},{id:3,username:"夜猫子",avatar:"",studyTime:12800},{id:4,username:"早起鸟",avatar:"",studyTime:10500},{id:5,username:"专注达人",avatar:"",studyTime:9200}]),aa=e((()=>Q.rooms.filter((a=>!a.isPrivate&&1!==a.ownerId)))),sa=e((()=>Q.myRooms));l((async()=>{await ea()}));const ea=async()=>{U.value=!0;try{await Q.fetchRooms()}catch(a){t.error("获取自习室列表失败")}finally{U.value=!1}},la=()=>{t.info("请使用顶部的创建自习室按钮")},ta=a=>{a.currentMembers>=a.maxMembers?t.warning("该自习室已满员"):j.push({name:"StudyRoom",params:{id:a.id}})},ia=a=>{const s=Math.floor(a/60),e=Math.floor(s/24);return e>0?`${e}天${s%24}小时`:s>0?`${s}小时${a%60}分钟`:`${a}分钟`};return(a,s)=>{const e=n("el-button"),l=n("el-icon"),t=n("el-card"),u=n("el-col"),w=n("el-empty"),j=n("el-row"),Q=n("el-avatar"),ea=v("loading");return c(),i("div",C,[r("div",M,[s[3]||(s[3]=r("h1",null,"欢迎来到 NewENest",-1)),s[4]||(s[4]=r("p",null,"在这里，你可以创建或加入自习室，与志同道合的伙伴一起高效学习。",-1)),r("div",T,[r("div",$,[r("div",R,o(W.value),1),s[0]||(s[0]=r("div",{class:"stat-label"},"活跃用户",-1))]),r("div",z,[r("div",A,o(X.value),1),s[1]||(s[1]=r("div",{class:"stat-label"},"自习室数量",-1))]),r("div",E,[r("div",I,o(ia(Y.value)),1),s[2]||(s[2]=r("div",{class:"stat-label"},"累计学习时间",-1))])])]),d(j,{gutter:20},{default:m((()=>[d(u,{xs:24,sm:24,md:16,lg:18},{default:m((()=>[r("div",N,[s[6]||(s[6]=r("h2",null,"公开自习室",-1)),d(e,{type:"primary",plain:"",onClick:la},{default:m((()=>s[5]||(s[5]=[y(" 创建自习室 ")]))),_:1})]),p((c(),f(j,{gutter:20},{default:m((()=>[(c(!0),i(_,null,b(aa.value,(a=>(c(),f(u,{key:a.id,xs:24,sm:12,md:8,lg:8,xl:6,class:"mb-10"},{default:m((()=>[d(t,{class:"room-card",onClick:s=>ta(a)},{default:m((()=>[r("div",{class:g(["room-theme",`theme-${a.theme}`])},null,2),r("div",S,[r("h3",null,o(a.name),1),r("p",q,o(a.description||"暂无描述"),1),r("div",B,[r("span",F,[d(l,null,{default:m((()=>[d(k(x))])),_:1}),y(" "+o(a.currentMembers)+" / "+o(a.maxMembers),1)])])]),d(e,{type:"primary",size:"small",class:"join-btn"},{default:m((()=>s[7]||(s[7]=[y("进入自习室")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128)),0===aa.value.length?(c(),f(w,{key:0,description:"暂无公开自习室"})):h("",!0)])),_:1})),[[ea,U.value]])])),_:1}),d(u,{xs:24,sm:24,md:8,lg:6},{default:m((()=>[r("div",H,[s[9]||(s[9]=r("h2",null,"我的自习室",-1)),p((c(),i("div",P,[(c(!0),i(_,null,b(sa.value,(a=>(c(),i("div",{key:a.id,class:"my-room-item"},[r("div",V,o(a.name),1),d(e,{type:"primary",size:"small",onClick:s=>ta(a)},{default:m((()=>s[8]||(s[8]=[y(" 进入 ")]))),_:2},1032,["onClick"])])))),128)),0===sa.value.length?(c(),f(w,{key:0,description:"暂无自习室"})):h("",!0)])),[[ea,U.value]])]),r("div",D,[s[10]||(s[10]=r("h2",null,"学习排行榜",-1)),r("div",G,[(c(!0),i(_,null,b(Z.value,((a,s)=>(c(),i("div",{key:a.id,class:"leaderboard-item"},[r("div",J,o(s+1),1),d(Q,{size:32,src:a.avatar},{default:m((()=>[y(o(a.username.charAt(0)),1)])),_:2},1032,["src"]),r("div",K,[r("div",L,o(a.username),1),r("div",O,o(ia(a.studyTime)),1)])])))),128))])])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-82652fc5"]]);export{Q as default};
