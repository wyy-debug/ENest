import{d as e,r,N as a,a as s,b as l,e as o,w as i,Q as u,f as t,h as d,o as m,E as n,u as p}from"./index-DxIqJ1ay.js";import{u as g}from"./userStore--b81hqFJ.js";import{_ as c}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-rSMZb3Ae.js";const f={class:"register-container"},w={class:"login-link"},b=c(e({__name:"RegisterView",setup(e){const c=p(),b=g(),_=r(),v=r(!1),V=a({username:"",email:"",password:"",confirmPassword:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(e,r,a)=>{""===r?a(new Error("请再次输入密码")):r!==V.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},x=async()=>{_.value&&await _.value.validate((async e=>{if(!e)return;v.value=!0;const r=await b.register(V.username,V.email,V.password);v.value=!1,r.success?(n.success("注册成功，请登录"),c.push("/login")):n.error(r.message)}))};return(e,r)=>{const a=t("el-input"),n=t("el-form-item"),p=t("el-button"),g=t("el-form"),c=t("router-link");return m(),s("div",f,[r[7]||(r[7]=l("h2",{class:"title"},"注册",-1)),o(g,{ref_key:"formRef",ref:_,model:V,rules:h,"label-position":"top",size:"large",onSubmit:u(x,["prevent"])},{default:i((()=>[o(n,{label:"用户名",prop:"username"},{default:i((()=>[o(a,{modelValue:V.username,"onUpdate:modelValue":r[0]||(r[0]=e=>V.username=e),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])])),_:1}),o(n,{label:"邮箱",prop:"email"},{default:i((()=>[o(a,{modelValue:V.email,"onUpdate:modelValue":r[1]||(r[1]=e=>V.email=e),placeholder:"请输入邮箱","prefix-icon":"Message"},null,8,["modelValue"])])),_:1}),o(n,{label:"密码",prop:"password"},{default:i((()=>[o(a,{modelValue:V.password,"onUpdate:modelValue":r[2]||(r[2]=e=>V.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])])),_:1}),o(n,{label:"确认密码",prop:"confirmPassword"},{default:i((()=>[o(a,{modelValue:V.confirmPassword,"onUpdate:modelValue":r[3]||(r[3]=e=>V.confirmPassword=e),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])])),_:1}),o(n,null,{default:i((()=>[o(p,{type:"primary","native-type":"submit",loading:v.value,class:"submit-btn"},{default:i((()=>r[4]||(r[4]=[d(" 注册 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]),l("div",w,[r[6]||(r[6]=d(" 已有账号？ ")),o(c,{to:"/login"},{default:i((()=>r[5]||(r[5]=[d("立即登录")]))),_:1})])])}}}),[["__scopeId","data-v-75cb18fd"]]);export{b as default};
